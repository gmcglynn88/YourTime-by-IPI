<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Time by IPI</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Proxima+Nova:wght@400;700&display=swap">
    <script src="https://code.jquery.com/jquery-3.7.1.js"integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="crossorigin="anonymous"></script>
</head>
<body>
    <header>
        <h1>Your Time by IPI</h1>
        <img src="https://raw.githubusercontent.com/gmcglynn88/TimeoffApp/main/IPI_Primary%20Identity_Corporate_REVERSED_ECC.png" alt="Consulting Logo" class="logo">
    </header>

    <hr class="divider">

    <div class="tab-container">
        <div class="tab">
            <button class="tablinks active" onclick="openTab(event, 'TimeOffBalances')">Time Off Balances</button>
            <button class="tablinks" onclick="openTab(event, 'Settings')" id="defaultOpen">Add Agent Data</button>
        </div>
    </div>

    <!-- Time Off Balances Tab -->
    <div id="TimeOffBalances" class="tabcontent" style="display: block;">
        <div class="filters">
            <div>
                <h3>Select Agent</h3>
                <select id="agent-select" onchange="updateTables()">
                    <option value="Select" selected>Please Select</option>
                    <option value="all">Select All</option>
                    <!-- Loop through users in `userdata` -->
                    <% Object.keys(userdata).forEach(function(name) { %>
                        <option value="<%= name %>"><%= name %></option>
                    <% }); %>
                </select>
            </div>
        </div>

        <!-- Balances Table -->
        <h3>Time off Balances</h3>
        <table id="balances-table">
            <thead>
                <tr>
                    <th>Agent Name</th>
                    <th>Team</th>
                    <th>Management Unit</th>
                    <th>Holiday (Current Year)</th>
                    <th>Holiday (Next Year)</th>
                    <th>Time off In Lieu</th>
                </tr>
            </thead>
            <tbody id="balances-table-body">
                <!-- Data rows go here -->
                <% Object.keys(userdata).forEach(function(name) { %>
                    <% userdata[name].forEach(function(user) { %>
                        <tr>
                            <td><%= user.agentName %></td>
                            <td><%= user.team %></td>
                            <td><%= user.managementUnit %></td>
                            <td><%= user.holidayCurrentYear %></td>
                            <td><%= user.holidayNextYear %></td>
                            <td><%= user.timeOffInLieu %></td>
                        </tr>
                    <% }); %>
                <% }); %>
            </tbody>
        </table>
    </div>

    <script>
        function updateTables() {
            // Your table update logic here
        }
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }
        document.getElementById("defaultOpen").click();
    </script>
</body>
</html>
